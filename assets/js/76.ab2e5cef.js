(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{328:function(t,s,a){"use strict";a.r(s);var n=a(9),o=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"《你不知道的javascript》"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#《你不知道的javascript》","aria-hidden":"true"}},[t._v("#")]),t._v(" 《你不知道的JavaScript》")]),t._v(" "),a("h2",{attrs:{id:"编译原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译原理","aria-hidden":"true"}},[t._v("#")]),t._v(" 编译原理")]),t._v(" "),a("p",[a("code",[t._v("JS引擎")]),t._v("在"),a("code",[t._v("执行栈")]),t._v("中执行源代码时，会先将源代码进行"),a("code",[t._v("编译")]),t._v("，拿到计算机看得懂的可执行代码（直接操作内存的机器代码），再JS引擎"),a("code",[t._v("执行")]),t._v("。")]),t._v(" "),a("ul",[a("li",[t._v("概念\n"),a("ul",[a("li",[a("code",[t._v("引擎")]),t._v("。 从头到尾的编译与执行，最重要。")]),t._v(" "),a("li",[a("code",[t._v("编译器")]),t._v("。引擎好朋友之一，语法分析以及代码生成。")]),t._v(" "),a("li",[a("code",[t._v("作用域")]),t._v("。引擎好朋友之一，一套规则，确定标志符的访问权限。")])])])]),t._v(" "),a("h3",{attrs:{id:"过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#过程","aria-hidden":"true"}},[t._v("#")]),t._v(" 过程")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("编译")]),t._v("（源代码在执行之前，会经历以下3个步骤）\n"),a("ol",[a("li",[a("code",[t._v("词法分析")]),t._v("（涉及到引擎、作用域概念）。比如var a = 2分解为词法单元var、a、=、2。")]),t._v(" "),a("li",[a("code",[t._v("语法分析")]),t._v("。词法单元流（数组），转为抽象语法树AST。")]),t._v(" "),a("li",[a("code",[t._v("代码生成")]),t._v("。AST转为可执行代码(比如定义内存、告诉js引擎如何操作内存等机器执行代码)。")])])]),t._v(" "),a("li",[a("strong",[t._v("执行")])])]),t._v(" "),a("p",[t._v("举例1，按照JS引擎和它的朋友们去思考变量赋值，看他们如何协作：var a = 2")]),t._v(" "),a("ol",[a("li",[t._v("编译。编译器先进行"),a("code",[t._v("词法分析、语法分析")]),t._v("，生成AST;编译器AST到代码生成时，"),a("code",[t._v("为变量分配内存，命名为a，然后将a = 2生成机器代码（如何操作内存），好供JS引擎直接执行")]),t._v("。\n"),a("ol",[a("li",[t._v("遇到var a，编译器会询问作用域是否已经有改命名存在于同一个作用域。是，编译器忽略，继续编译；否，在当前作用域创建变量，命名为a。")]),t._v(" "),a("li",[t._v("编译器为引擎生成运行时所需代码，这些代码被用来处理a = 2这个赋值操作。")])])]),t._v(" "),a("li",[t._v("执行。引擎运行时，先询问作用域，当前作用域是否存在一个叫a的变量，是，引擎会使用这个变量a，赋值2给它；否，继续向上查找；没找到，JS引擎对外抛出错误。")])]),t._v(" "),a("p",[t._v("举例2,一个函数被调用就会创建一个新的执行环境(也叫上下文环境)，里面会有作用域嵌套的概念。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("++")]),t._v("i"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ol",[a("li",[t._v("编译。1.创建一个[作用域链]。2.创建变量，函数和参数。3.确定this的值。")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 意味着每个执行环境在概念上作为一个对象并带有三个属性")]),t._v("\nexecutionContextObj "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//作用域链：{变量对象＋所有父执行环境的变量对象}")]),t._v("\nscopeChain"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("/* variableObject + all parent execution context's variableObject */")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//变量对象:{函数形参＋内部的变量＋函数声明(但不包含表达式)}")]),t._v("\nvariableObject"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("/* function arguments / parameters, inner variable and function declarations */")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("执行。赋值，执行代码。")])]),t._v(" "),a("blockquote",[a("p",[t._v("闭包：一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。简单说，指有权访问另一个函数作用域中的变量的函数")])]),t._v(" "),a("h2",{attrs:{id:"块作用域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#块作用域","aria-hidden":"true"}},[t._v("#")]),t._v(" 块作用域")]),t._v(" "),a("p",[t._v("函数作用域是最常见的作用域单元。作用域下保存对应的变量或者函数，同时"),a("code",[t._v("作用域是嵌套的")]),t._v("，当在查找当前作用域下的变量时，找不到会递归去上层的作用域查找，直到找到为止；当找不到时则直接报错。")]),t._v(" "),a("ul",[a("li",[t._v("闭包的应用")]),t._v(" "),a("li",[t._v("垃圾回收机制基础")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" globalScope "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("globalScope"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" innerScope "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("123")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("innerScope"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 123")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// let关键字隐式的将变量innerScope绑定到花括号{..}作用域中")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" globalScope "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("globalScope"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" innerScope "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("123")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("innerScope"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// innerScope is not defined")]),t._v("\n")])])]),a("h2",{attrs:{id:"this"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#this","aria-hidden":"true"}},[t._v("#")]),t._v(" this")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("this在运行时绑定")]),t._v("，并不是在编写时绑定。")]),t._v(" "),a("li",[t._v("当一个函数（函数也是对象）被调用时，会创建一个"),a("code",[t._v("执行上下文")]),t._v("，this是执行上下文的一个属性。执行上下文包含：\n"),a("ul",[a("li",[t._v("哪里被调用（调用栈）")]),t._v(" "),a("li",[t._v("函数的调用方法")]),t._v(" "),a("li",[t._v("传入的参数等")])])])]),t._v(" "),a("h3",{attrs:{id:"this绑定规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#this绑定规则","aria-hidden":"true"}},[t._v("#")]),t._v(" this绑定规则")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("默认绑定")]),t._v(" 严格模式绑定到undefined，否则绑定到全局对象")]),t._v(" "),a("li",[a("code",[t._v("隐式绑定")]),t._v(" 绑定到上下文对象")]),t._v(" "),a("li",[a("code",[t._v("显示绑定")]),t._v(" call/apply/bind绑定到指定对象")]),t._v(" "),a("li",[a("code",[t._v("new绑定")]),t._v(" 绑定到新创建的对象")])]),t._v(" "),a("p",[t._v("ES6的箭头函数并不会使用以上四种绑定规则，而是根据当前的词法作用域来决定this（等同于ES5 self = this机制）")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 隐式绑定")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    a"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    foo"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" foo\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nobj"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 隐式丢失")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bar "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo "),a("span",{attrs:{class:"token comment"}},[t._v("// bar 引用的是foo函数本身，而不是对象obj")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("bar")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// undefined")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 最常见的隐式丢失")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("/** function setTimout(fn, delay) { // 等同于 fn = obj.foo\n    // 等待delay\n    fn()\n}**/")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("100")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// undefined")]),t._v("\n")])])]),a("h2",{attrs:{id:"js基本数据类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js基本数据类型","aria-hidden":"true"}},[t._v("#")]),t._v(" js基本数据类型")]),t._v(" "),a("ul",[a("li",[t._v("string")]),t._v(" "),a("li",[t._v("number")]),t._v(" "),a("li",[t._v("boolean")]),t._v(" "),a("li",[t._v("null")]),t._v(" "),a("li",[t._v("undefined")]),t._v(" "),a("li",[t._v("object\n"),a("ul",[a("li",[t._v("特殊对象子类行。\n"),a("ul",[a("li",[t._v("函数是对象的子类型,函数是‘可调用对象’。"),a("code",[t._v("函数 ～= 对象")]),t._v(" "),a("ul",[a("li",[t._v("函数内部属性[[Call]]，该属性使其可以被调用")]),t._v(" "),a("li",[t._v("函数不仅是对象，还可以拥有属性。如：function(a, b){}.length === 2")])])]),t._v(" "),a("li",[t._v("数组也是对象的一种类型")])])]),t._v(" "),a("li",[t._v("内置函数（或对象），也叫"),a("code",[t._v("原生函数")]),t._v("（它也可以使用构造函数创建实例）\n"),a("ul",[a("li",[t._v("String")]),t._v(" "),a("li",[t._v("Number")]),t._v(" "),a("li",[t._v("Boolean")]),t._v(" "),a("li",[t._v("Object")]),t._v(" "),a("li",[t._v("Function")]),t._v(" "),a("li",[t._v("Array")]),t._v(" "),a("li",[t._v("Date")]),t._v(" "),a("li",[t._v("RegExp")]),t._v(" "),a("li",[t._v("Error")])])])])]),t._v(" "),a("li",[t._v("symbol（ES6）")])]),t._v(" "),a("h4",{attrs:{id:"如何判断"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何判断","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何判断")]),t._v(" "),a("ul",[a("li",[t._v("typeof： 查看值的类型")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("42")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'number'")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 特殊")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'object'")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("a")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'function'")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'object'")]),t._v("\n")])])]),a("h4",{attrs:{id:"值和类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#值和类型","aria-hidden":"true"}},[t._v("#")]),t._v(" 值和类型")]),t._v(" "),a("p",[t._v("js变量没有类型，只有值才有")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 只有值才有类型。变量只作为一种标记")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("42")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// typeof a === 'number'")]),t._v("\na "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// typeof a === 'boolean'")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("Array.prototype.slice.call(args)与Array.from(args) 都是把类似数组对象，转换为真正的数组对象。")])]),t._v(" "),a("h3",{attrs:{id:"原生函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原生函数","aria-hidden":"true"}},[t._v("#")]),t._v(" 原生函数")]),t._v(" "),a("p",[t._v("JS为基本数据类型值提供了封装对象，称为原生对象。")]),t._v(" "),a("ul",[a("li",[t._v("string、number、boolean、object、Array都是即有文字形式，又有构造形式。")]),t._v(" "),a("li",[t._v("null、undefined只有文字形式")]),t._v(" "),a("li",[t._v("Date只有构造形式")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 必要时js引擎会自动把字符串字面量转换成String对象")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 所以该字符串字面量可以有属性和方法")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" str "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'hello'")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 文字形式")]),t._v("\nstr"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{attrs:{class:"token comment"}},[t._v("// 5")]),t._v("\nstr"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("charAt")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// l")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" strObj "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("String")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'hello'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 构造形式")]),t._v("\n")])])]),a("h2",{attrs:{id:"promise"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#promise","aria-hidden":"true"}},[t._v("#")]),t._v(" Promise")]),t._v(" "),a("p",[t._v("回调函数表达异步和并发有两个主要缺陷："),a("code",[t._v("缺乏顺序性和可信任性")]),t._v("。\n"),a("code",[t._v("Promise封装了依赖时间的状态")]),t._v("--等待底层值的完成或拒绝，所以Promise本身与时间无关。因此Promise可以按照可预测的方式组成（组合），而不用关心时序或底层的结果。\n另外，一旦Promise决议，它就永远保持在这个状态。")]),t._v(" "),a("p",[t._v("Promise解决了因只用回调的代码而备受困扰的"),a("code",[t._v("控制反转")]),t._v("问题。\n但Promise也没有摈弃回调，只是把回调的安排转交给一位可信任的中介机制。")]),t._v(" "),a("ul",[a("li",[t._v("对象\n"),a("ul",[a("li",[t._v("Promise.resolve()")]),t._v(" "),a("li",[t._v("Promise.reject()")]),t._v(" "),a("li",[t._v("Promise.all([promises]) 并发")]),t._v(" "),a("li",[t._v("Promise.race([promises]) 竞争")])])]),t._v(" "),a("li",[t._v("实例\n"),a("ul",[a("li",[t._v("promise.then()")]),t._v(" "),a("li",[t._v("promise.catch()")]),t._v(" "),a("li",[t._v("promise.finally()")])])])]),t._v(" "),a("h4",{attrs:{id:"promise局限性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#promise局限性","aria-hidden":"true"}},[t._v("#")]),t._v(" Promise局限性")]),t._v(" "),a("ul",[a("li",[t._v("单一值。Promise只能有一个完成值或拒绝值。")]),t._v(" "),a("li",[t._v("单决议。")]),t._v(" "),a("li",[t._v("无法取消的Promise。一旦建立Promise，会立即执行，无法取消。")]),t._v(" "),a("li",[t._v("Promise性能。")]),t._v(" "),a("li",[t._v("顺序错误处理。")]),t._v(" "),a("li",[t._v("不设置回调函数，Promise内部抛出的错误不会反应到外部。(《ES6》入门）")]),t._v(" "),a("li",[t._v("当处于Pending状态，无法得知目前进展到哪一个阶段。（《ES6》入门）")])]),t._v(" "),a("h2",{attrs:{id:"生成器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成器","aria-hidden":"true"}},[t._v("#")]),t._v(" 生成器")]),t._v(" "),a("p",[a("code",[t._v("生成器")]),t._v("是一类特殊的函数(（关键字：* 和yield）)，可以一次或多次启动和停止，并不一定要完成。")]),t._v(" "),a("p",[a("code",[t._v("生成器对象")]),t._v("是由一个 generator function 返回的,并且它符合可迭代协议（[Symbol.iterator]）和迭代器协议（next）。这两个协议在ES6的for of/解构等起很大作用。")]),t._v(" "),a("p",[t._v("使用生成器对象，解决异步代码同步问题:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token function"}},[t._v("main")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" text "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" url "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`http://netease/")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("x "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" y"),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// it来自main()")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// it.next再次进入main中，第二次返回data，赋值给text变量")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("ajax")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" it"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" it "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("main")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 生成器对象")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 启动,执行foo(1, 2)。遇到yield，暂停，第一次返回undefined")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// ajax是异步，所以不受暂停影响")]),t._v("\nit"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"生成器-promise"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成器-promise","aria-hidden":"true"}},[t._v("#")]),t._v(" 生成器 + Promise")]),t._v(" "),a("p",[t._v("以上yield出来的是数据，可以构造为一个promise，通过生成器把它yield出来。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("foo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 工具库辅助，自动执行同时返回Promise值。")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// ES9的async/await就是帮你干run的活")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("run")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gen"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" args "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("slice"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("call")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("argments"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" it"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    it "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" gen"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("apply")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// 返回promise对象")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("resolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("handleNext")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" next "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" it"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("next")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 启动")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("handleResult")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("next"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("done"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" next"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("result\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("resolve")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("next"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handleNext"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("next"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token function"}},[t._v("run")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// main见上面")]),t._v("\n")])])])])},[],!1,null,null,null);o.options.__file="book-you-dont-know-javascript.md";s.default=o.exports}}]);