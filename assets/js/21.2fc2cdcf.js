(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{517:function(e,t,a){e.exports=a.p+"assets/img/debugger-chrome.9bdb7c27.jpeg"},518:function(e,t,a){e.exports=a.p+"assets/img/react-devtools.84ab386b.jpeg"},519:function(e,t,a){e.exports=a.p+"assets/img/run-iphone.f04458c2.png"},621:function(e,t,a){"use strict";a.r(t);var r=a(9),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"reactnative-mac调试技巧"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#reactnative-mac调试技巧"}},[e._v("#")]),e._v(" ReactNative Mac调试技巧")]),e._v(" "),r("p",[e._v("工欲善其事，必先利其器。上篇文章快读搭建并运行一个App应用，但离工程化开发还是远不够的。调试程序是开发过程中必不可少的，高效的调试技能可以提高开发效率，也可以及时发现bug。")]),e._v(" "),r("p",[e._v("启动RN应用时，同时会启一个package server的node应用（可以理解为webpack功能），每次修改js代码，不需要重新run xcode，该server服务会把最新的js代码编译并提供给Native代码调用。")]),e._v(" "),r("h2",{attrs:{id:"调试技巧清单"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#调试技巧清单"}},[e._v("#")]),e._v(" 调试技巧清单")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("React Native调试菜单")])]),e._v(" "),r("li",[r("p",[e._v("chrome developer tool")])]),e._v(" "),r("li",[r("p",[e._v("react-devtools")])]),e._v(" "),r("li",[r("p",[e._v("Charles抓包工具")])]),e._v(" "),r("li",[r("p",[e._v("真机调试")])])]),e._v(" "),r("h2",{attrs:{id:"react-native调试菜单"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#react-native调试菜单"}},[e._v("#")]),e._v(" React Native调试菜单")]),e._v(" "),r("p",[r("code",[e._v("Command⌘ + D")]),e._v("即可调出调试菜单，里面有我们经常使用的调试功能。")]),e._v(" "),r("p",[r("img",{attrs:{src:"https://raw.githubusercontent.com/crazycodeboy/RNStudyNotes/master/React%20Native%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7%E4%B8%8E%E5%BF%83%E5%BE%97/images/Developer%20Menu.jpg",alt:"Developer Menu"}})]),e._v(" "),r("blockquote",[r("p",[e._v("提示：如果"),r("code",[e._v("Command⌘ + D")]),e._v('无法打开，是因为模拟器与键盘断开连接了，可以在Xcode中Hardware menu->Keyboard->"Connect Hardware Keyboard"')])]),e._v(" "),r("h3",{attrs:{id:"reload"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#reload"}},[e._v("#")]),e._v(" Reload")]),e._v(" "),r("p",[e._v("重新编译App，相当于Web的F5。快捷键"),r("code",[e._v("Command⌘ + R")])]),e._v(" "),r("h3",{attrs:{id:"hot-reloading"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#hot-reloading"}},[e._v("#")]),e._v(" Hot Reloading")]),e._v(" "),r("p",[e._v("热加载，做过Webpack工程化项目的人再熟悉不过。如果每次修改代码后需要手动刷新，效率值大大降低，热加载可以在保存代码后，自动进行增量包编译，实现模拟器的自动刷新。")]),e._v(" "),r("h3",{attrs:{id:"enable-live-reload"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#enable-live-reload"}},[e._v("#")]),e._v(" Enable Live Reload")]),e._v(" "),r("p",[e._v("ReactNative还给开发者提供了自动刷新的功能，也可以对代码自动刷新。这里和Hot Reloading的区别是Live Reload是全量刷新，每次保存代码都会自动生成bundle包并发送到手机上，使得应用初始化。")]),e._v(" "),r("h3",{attrs:{id:"show-inspector"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#show-inspector"}},[e._v("#")]),e._v(" Show Inspector")]),e._v(" "),r("p",[e._v("方便的查看到当前选中元素的位置、样式、层级关系、盒子模型信息等等，类似Chrome Elements Tab")]),e._v(" "),r("h2",{attrs:{id:"chrome-developer-tools"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#chrome-developer-tools"}},[e._v("#")]),e._v(" Chrome Developer Tools")]),e._v(" "),r("p",[e._v("强大的Chrome可以像调试js那样来调试React Native应用。方式类似webpack的sourcemap，可以对源代码进行断点调试")]),e._v(" "),r("h4",{attrs:{id:"第一步-启动远程调试"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#第一步-启动远程调试"}},[e._v("#")]),e._v(" 第一步：启动远程调试")]),e._v(" "),r("p",[e._v('在Developer Menu下单击"Debug JS Remotely" 启动JS远程调试功能。Chrome自动打开Tab页：“http://localhost:8081/debugger-ui”')]),e._v(" "),r("h4",{attrs:{id:"第二步-打开开发者工具"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#第二步-打开开发者工具"}},[e._v("#")]),e._v(" 第二步：打开开发者工具")]),e._v(" "),r("p",[e._v("快捷键："),r("code",[e._v("Command⌘ + Option⌥ + I")])]),e._v(" "),r("h4",{attrs:{id:"第三部-断点调试"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#第三部-断点调试"}},[e._v("#")]),e._v(" 第三部：断点调试")]),e._v(" "),r("p",[e._v("选中需要调试的代码行。")]),e._v(" "),r("p",[r("img",{attrs:{src:a(517),alt:""}})]),e._v(" "),r("blockquote",[r("p",[e._v("tips：在控制台(Console)上打印变量，执行脚本等操作。在开发调试中非常有用")])]),e._v(" "),r("h2",{attrs:{id:"react-devtools"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#react-devtools"}},[e._v("#")]),e._v(" react-devtools")]),e._v(" "),r("p",[e._v("rn调试菜单'Show Inspector'虽然可以让开发者可以看到层级和相关样式，但展现在app中过小，也无法像Chrome elements一样，实时修改。这里推荐使用react-devtools工具，让你轻松完成这一切。配合debugger或show inspector更强大")]),e._v(" "),r("p",[e._v("安装")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" -g react-devtools\n")])])]),r("p",[e._v("使用")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("react-devtools\n")])])]),r("p",[r("img",{attrs:{src:a(518),alt:""}})]),e._v(" "),r("blockquote",[r("p",[e._v("tips:该工具同样支持ReactJS哦")])]),e._v(" "),r("h2",{attrs:{id:"charles抓包工具"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#charles抓包工具"}},[e._v("#")]),e._v(" Charles抓包工具")]),e._v(" "),r("p",[e._v("reactnative的网络请求，在chrome中无法捕捉，所以需要使用抓包工具查看网络请求详细信息。Mac推荐"),r("a",{attrs:{href:"https://www.charlesproxy.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Charles"),r("OutboundLink")],1),e._v("工具")]),e._v(" "),r("h2",{attrs:{id:"真机调试"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#真机调试"}},[e._v("#")]),e._v(" 真机调试")]),e._v(" "),r("h3",{attrs:{id:"iphone"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#iphone"}},[e._v("#")]),e._v(" IPhone")]),e._v(" "),r("p",[e._v("目前网上大部分真机调试的文章都是基于以前的版本，在笔者最新的版本"),r("code",[e._v("v0.52")]),e._v("已经不再需要代码替换IP地址来得到打包的JSBundle。IOS本机测试需要Apple ID账号，如果需要发布到AppStore，则需要Devloper ID。经过测试，流程如下：")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("USB连接真机，xcode中设备选择真机")])]),e._v(" "),r("li",[r("p",[e._v("单击项目名，Target的ProjectName和ProjectNameTest中"),r("strong",[e._v("Signing")]),e._v("选项，Team中选择你已经绑定到Apple ID账号。如果没有选择列表，该地方会让你登陆一个账号。")])]),e._v(" "),r("li",[r("p",[e._v("单击运行即可在真机中查看App运行。晃动手机也可以调出调试菜单")])])]),e._v(" "),r("p",[r("img",{attrs:{src:a(519),alt:""}})]),e._v(" "),r("h3",{attrs:{id:"android"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#android"}},[e._v("#")]),e._v(" Android")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("根目录下执行"),r("code",[e._v("npm start")]),e._v(",确保package server启动,"),r("a",{attrs:{href:"http://localhost:8081",target:"_blank",rel:"noopener noreferrer"}},[e._v("localhost:8081"),r("OutboundLink")],1),e._v("可以访问")])]),e._v(" "),r("li",[r("p",[e._v("使用adb reverse命令。"),r("code",[e._v("adb reverse tcp:8081 tcp:8081")])])]),e._v(" "),r("li",[r("p",[e._v("晃动设备，打开开发者菜单，点击"),r("code",[e._v("Dev Settings")]),e._v(" -> "),r("code",[e._v("Debug server host for device")]),e._v(" -> 输入本机IP和8081端口")])]),e._v(" "),r("li",[r("p",[e._v("完成后晃动设备，选择"),r("code",[e._v("Reload JS")]),e._v("即可")])])]),e._v(" "),r("h3",{attrs:{id:"相关链接"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#相关链接"}},[e._v("#")]),e._v(" 相关链接")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://reactnative.cn/docs/0.51/debugging.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("React中文网"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/facebook/react-devtools",target:"_blank",rel:"noopener noreferrer"}},[e._v("react-devtools"),r("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=s.exports}}]);