(window.webpackJsonp=window.webpackJsonp||[]).push([[248],{755:function(t,s,a){"use strict";a.r(s);var e=a(9),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vscode插件开发实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vscode插件开发实践"}},[t._v("#")]),t._v(" VSCode插件开发实践")]),t._v(" "),a("p",[t._v("开发项目过程中，避免不了工具函数书写。当开发另外一个项目时，经常需要搜索项目，打开并找到对应工具函数拷贝。这种方式容易打断工作流程，而使用vscode插件可以在不离开IDE前提下，快速找到对应实用工具。")]),t._v(" "),a("blockquote",[a("p",[t._v("以下实践代码可到github "),a("a",{attrs:{href:"https://github.com/lq782655835/common-utils",target:"_blank",rel:"noopener noreferrer"}},[t._v("lq782655835/common -utils"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"开发插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发插件"}},[t._v("#")]),t._v(" 开发插件")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://code.visualstudio.com/api/get-started/your-first-extension",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方开发插件教程"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("官方已经把插件模板集成到yeoman（类似cli工具）中，十分方便开发者开发新插件。安装工具和模版：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install -g yo generator-code\nyo code // 生成模版\n")])])]),a("ol",[a("li",[t._v("生成模板后，最重要的是了解package.json，因为大部分设置都是在这设置。")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件名称")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"displayName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件显示名称")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Air Quaility"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件描述")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件版本")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"publisher"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beanleecode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件发布者")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"icon"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"logo.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件的icon，不支持svg，最小图片大小128*128")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"activationEvents"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 活动事件列表（哪些命令是激活的）")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onCommand:extension.sayHello"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./extension"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 代码书写主入口")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"contributes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"commands"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对应命令列表")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"command"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"extension.sayHello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 命令名，必须与上面activationEvents一致")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 命令显示解释")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("调试F5")])]),t._v(" "),a("p",[t._v("就是这么简单。VSCode 会启动一个新窗口供测试，十分方便。")]),t._v(" "),a("h2",{attrs:{id:"发布插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布插件"}},[t._v("#")]),t._v(" 发布插件")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://code.visualstudio.com/api/working-with-extensions/publishing-extension",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方发布插件教程"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("发布过程都依赖"),a("code",[t._v("vsce")]),t._v("工具，这是一个npm包，安装十分便捷：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm i vsce -g\n")])])]),a("h3",{attrs:{id:"发布方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布方式"}},[t._v("#")]),t._v(" 发布方式")]),t._v(" "),a("ol",[a("li",[t._v("直接把文件夹发给别人，让别人找到vscode的插件存放目录并放进去，然后重启vscode，一般不推荐；")]),t._v(" "),a("li",[t._v("打包成vsix插件，然后发送给别人安装，如果你的插件涉及机密不方便发布到应用市场，可以尝试采用这种方式；")]),t._v(" "),a("li",[t._v("注册开发者账号，发布到官网应用市场，这个发布和npm一样是不需要审核的。")])]),t._v(" "),a("h2",{attrs:{id:"本地打包方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地打包方式"}},[t._v("#")]),t._v(" 本地打包方式")]),t._v(" "),a("p",[t._v("打包成vsix文件：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vsce package\n")])])]),a("blockquote",[a("p",[t._v("当遇到全局安装了vsce，但vsce命令找不到，请检查是否使用了nvm等node管理工具，并切换到指定的node版本。")])]),t._v(" "),a("h2",{attrs:{id:"在线发布方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在线发布方式"}},[t._v("#")]),t._v(" 在线发布方式")]),t._v(" "),a("ol",[a("li",[t._v("在"),a("a",{attrs:{href:"https://account.microsoft.com/?lang=zh-CN&refd=account.live.com&refp=landing&mkt=ZH-CN",target:"_blank",rel:"noopener noreferrer"}},[t._v("Visual Studio Team Services"),a("OutboundLink")],1),t._v(" 创建一个账号")]),t._v(" "),a("li",[t._v("创建token\n"),a("ul",[a("li",[t._v("点击右上角的个人信息security，再点击create token")]),t._v(" "),a("li",[t._v("name随便填写，expires In最好选最长时间，"),a("code",[t._v("Accounts一定要选All accessible accounts")]),t._v("，Authorized Scopes选择 All Scopes。")]),t._v(" "),a("li",[t._v("create后会给你一个token值，它只显示一次，务必要保留，之后命令行操作会使用到。")])])]),t._v(" "),a("li",[t._v("借助vsce工具上传到商店。\n"),a("ol",[a("li",[a("code",[t._v("vsce create-publisher (name)")]),t._v(" 创建publisher，这个步骤会让你填写name、email以及上步获得的token")]),t._v(" "),a("li",[a("code",[t._v("vsce publish (version)")]),t._v(" 发布到在线商店（依赖于上一步，已创建publisher并登录）")])])])]),t._v(" "),a("h4",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),a("ul",[a("li",[t._v("类似npm包，README.md文件默认会显示在插件主页；")]),t._v(" "),a("li",[t._v("增量发布可以修改package.json的version外，还可以使用代号：major/minor/patch，如：vsce publish patch")])])])}),[],!1,null,null,null);s.default=n.exports}}]);